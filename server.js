require('dotenv').config();
const express = require('express');
const { GoogleGenerativeAI } = require('@google/generative-ai');
const cors = require('cors');
const path = require('path');
const multer = require('multer');
const pdfParse = require('pdf-parse');
const mammoth = require('mammoth');
const fuzz = require('fuzzball');

const app = express();
const PORT = 3000;
const MODEL_NAME = "gemini-2.5-flash";

// ====== ุงูุฅุนุฏุงุฏุงุช ======
app.use(cors());
app.use(express.json({ limit: '10mb' }));
app.use(express.static(__dirname));

// ====== Gemini AI ุฌุงูุฒ ูุฎูุงุฑ ุงุฎูุฑ ======
let geminiModel = null;
if (process.env.GEMINI_API_KEY) {
  try {
    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
    geminiModel = genAI.getGenerativeModel({ model: MODEL_NAME });
    console.log("Gemini ุฌุงูุฒ ููุญุฑู ุฐูุงุก ุฃุณุงุณู");
  } catch (err) {
    console.error("ูุดู ุชุญููู Gemini:", err.message);
  }
}

// ====== ุงูุฐุงูุฑุฉ ูุงูุฌูุณุงุช ======
const sessions = new Map();      // sessionId โ [{role, content}]
const userProfiles = new Map(); 
const dialogStates = new Map(); 
// sessionId โ { intent, step, data }
 // sessionId โ {interests: []}

// ====== ูุธุงู ุงูุชุตุญูุญ ุงูุชููุงุฆู ======
const autoCorrections = {
  "ุจุญุจ": "ุฃุญุจ", "ุนุงูุฒ": "ุฃุฑูุฏ", "ุนูุฒ": "ุฃุฑูุฏ", "ุงุจุบุง": "ุฃุฑูุฏ", "ุงุจุบู": "ุฃุฑูุฏ",
  "ุงุจู": "ุฃุฑูุฏ", "ุงูู": "ูุงุฐุง", "ุงู": "ุฃู", "ููู": "ููุงุฐุง", "ุนูุดุงู": "ูุฃู",
  "ุนุดุงู": "ูุฃู", "ููุนูู": "ุณููุนู", "ููุฐุง": "ุณูุฃุชู", "ููุฑูุญ": "ุณูุฐูุจ",
  "ููุฌู": "ุณูุฃุชู", "ุนุงูู": "ููุนู", "ุจูุนูู": "ููุนู", "ูุด": "ููุณ", "ูู": "ููุณ",
  "ุงูุง": "ุฃูุง", "ุฌุฏุงุงุง": "ุฌุฏูุง", "ุงุด": "ุฃูุด", "ูุด": "ุฃูุด", "ูุงุก": "ูุง",
  "ุงูุช": "ุฃูุช", "ุงูุชู": "ุฃูุชู", "ุงูุชู": "ุฃูุชู", "ุงุฐุง": "ุฅุฐุง", "ุงูู": "ุฅูู",
  "ุตูุญู": "ุตูุญุฉ", "ูุตู": "ูุตุฉ", "ููุชุจู": "ููุชุจุฉ", "ุชูุณูุฑ": "ุชูุณูุฑ"
};

function enhancedAutoCorrect(text) {
  let corrected = text;
  for (const [wrong, correct] of Object.entries(autoCorrections)) {
    const regex = new RegExp(`\\b${wrong}\\b`, 'gi');
    corrected = corrected.replace(regex, (match) =>
      match === match.toUpperCase() ? correct.toUpperCase() :
      match[0] === match[0].toUpperCase() ? correct.charAt(0).toUpperCase() + correct.slice(1) :
      correct
    );
  }
  return corrected;
}
// ุงูุจุญุซ ุงููุง ุจุงููุงุนุฏู ุงููุนุฑููู 
function getCorrectionStats(original, corrected) {
  const origWords = original.split(/\s+/);
  const corrWords = corrected.split(/\s+/);
  const corrections = [];
  origWords.forEach((word, i) => {
    if (corrWords[i] && word !== corrWords[i] && autoCorrections[word.toLowerCase()]) {
      corrections.push({ original: word, corrected: corrWords[i] });
    }
  });
  return {
    count: corrections.length,
    correctionsCount: corrections.length, // ููู frontend
    accuracy: origWords.length > 0 ? Math.round(((origWords.length - corrections.length) / origWords.length) * 100) : 100
  };
}

// ====== ูุงุนุฏุฉ ุงููุนุฑูุฉ (KB) ======
function normalize(text) {
  return text.trim().toLowerCase().replace(/[ุ,.:!]/g, '').replace(/\s+/g, ' ');
}

const knowledgeBase = new Map([ 
  
   // 1. ุงูุชุฑุญูุจ ูุงูุณุคุงู ุนู ุงูุญุงู
  ["ูููู", ["ุฃูุง ุจุฎูุฑ ุงูุญูุฏ ูููุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],
  ["ุงุฎุจุงุฑู", ["ุฃูุง ุจุฎูุฑ ุงูุญูุฏ ูููุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],
  ["ููู ุญุงูู", ["ุฃูุง ุจุฎูุฑ ุงูุญูุฏ ูููุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],
  ["ุงูุด ูุณูู ", ["ุฃูุง ุจุฎูุฑ ุงูุญูุฏ ูููุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],
  ["ูุงู", ["ููุง ุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงูููู๐ค"]],
  [" ุงูุณูุงู ุนูููู", ["   ูุนูููู ุงูุณูุงู , ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],
  ["ุทููู ุนูู", ["ุฃูุง ุจุฎูุฑ ุงูุญูุฏ ูููุ ููู ุฃูุฏุฑ ุฃุณุงุนุฏู ุงููููุ ๐ค"]],

  // 2. ุงูุชูุฏูุน
  ["ูุน ุงูุณูุงูุฉ", ["ูู ุฃูุงู ุงูููุ ููุฑุชูู ุงูููู ๐ค"]],
  ["ุจุงู", ["ูู ุฃูุงู ุงูููุ ููุฑุชูู ุงูููู ๐ค"]],
  ["ุงูู ุงูููุงุก ", ["ูู ุฃูุงู ุงูููุ ููุฑุชูู ุงูููู ๐ค"]],
  ["ุณูุงู", ["ูู ุฃูุงู ุงูููุ ููุฑุชูู ุงูููู ๐ค"]],
  ["ูุฏุงุนุง", ["ูู ุฃูุงู ุงูููุ ููุฑุชูู ุงูููู ๐ค"]],

  // 3. ุงูุดูุฑ ูุงูุชูุฏูุฑ
  ["ุดูุฑุง", ["ุงูุนูู ูุฐุง ูุงุฌุจูุ ุณุนูุฏ ุจูุณุงุนุฏุชู ุฏุงูููุง ๐ธ"]],
  ["ูุนุทูู ุงูุนุงููู", ["ุงููู ูุนุงููู , ุณุนูุฏ ุจูุณุงุนุฏุชู ุฏุงูููุง ๐ธ"]],
  ["ุชุณูู", [" ูุฐุง ูุงุฌุจูุ ุณุนูุฏ ุจูุณุงุนุฏุชู ุฏุงูููุง ๐ธ"]],
  ["ุซุงูููู", ["ููููู ูุฐุง ูุงุฌุจูุ ุณุนูุฏ ุจูุณุงุนุฏุชู ุฏุงูููุง ๐ธ"]],

  // 4. ุทูุจ ุงูุชุฑุงุญุงุช ูุชุจ ุนุงูุฉ
  ["ุงูุชุฑุญ ูู ูุชุจ", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุงุจุบุง ูุชุงุจ ุงูุฑุงู", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุงุจุบุง ูุชุจ", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุงูุด ุงูุฑุง", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุงุนุทููู ุชุฑุดูุญุงุช ูุชุจ", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุฑุดุญ ูู ูุชุจ", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],
  ["ุงุจุบุง ุงุจุฏุง ุงูุฑุง ุจุณ ูุง ุงุฏุฑู ุงูุด ุงุฎุชุงุฑ", ["ุฃููุฏ! ุชุจุบู ูุชุจ ูู ุฃู ูุฌุงูุ ุฏูููุฉุ ุชุทููุฑ ุฐุงุชุ ุฑูุงูุงุชุ ุซูุงููุฉุ"]],

  // 5. ูุชุจ ุชุทููุฑ ุงูุฐุงุช ูุงูุชุญููุฒ
  ["ุงุจุบุง ูุชุจ ุชุทููุฑ ุฐุงุช", ["ุฌุฑุจ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" ู\"ูู ุงููุงูุจุงูุงุฉ\"ุ ูููุง ููุชุงุฒุฉ ูุชุทููุฑ ุงูุฐุงุช ๐ฑ"]],
  ["ุชุทููุฑ ุฐุงุช", ["ุฌุฑุจ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" ู\"ูู ุงููุงูุจุงูุงุฉ\"ุ ูููุง ููุชุงุฒุฉ ูุชุทููุฑ ุงูุฐุงุช ๐ฑ"]],
  ["ุฑุดุญ ูู ูุชุจ ุชุญููุฒูู", ["ุฌุฑุจ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" ู\"ูู ุงููุงูุจุงูุงุฉ\"ุ ูููุง ููุชุงุฒุฉ ูุชุทููุฑ ุงูุฐุงุช ๐ฑ"]],
  ["ูุชุจ ุชุฎูู ุชูููุฑู ุงูุฌุงุจู", ["ุฌุฑุจ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" ู\"ูู ุงููุงูุจุงูุงุฉ\"ุ ูููุง ููุชุงุฒุฉ ูุชุทููุฑ ุงูุฐุงุช ๐ฑ"]],
  ["ูุชุจ ุนู ุงููุฌุงุญ", ["ุฌุฑุจ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" ู\"ูู ุงููุงูุจุงูุงุฉ\"ุ ูููุง ููุชุงุฒุฉ ูุชุทููุฑ ุงูุฐุงุช ๐ฑ"]],
  ["ุงุจุบุง ูุชุจ ุนู ุงูุชุญููุฒ", ["ูุชุญููุฒ ุนูููุ ุฌุฑุจ:\n๐ \"ููุฉ ุงูุชูููุฑ ุงูุฅูุฌุงุจู\" - ููุฑูุงู ููุณูุช ุจูู\n๐ \"ุฅููุธ ุงูุนููุงู ุจุฏุงุฎูู\" - ุฃูุชููู ุฑูุจูุฒ\n๐ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" - ุณุชููู ูููู\nูููุง ุฑุงุฆุนุฉ ูุดุญู ุทุงูุชู ุงูุฏุงุฎููุฉ! ๐"]],
  ["ูุชุจ ุชุญููุฒ", ["ูุชุญููุฒ ุนูููุ ุฌุฑุจ:\n๐ \"ููุฉ ุงูุชูููุฑ ุงูุฅูุฌุงุจู\" - ููุฑูุงู ููุณูุช ุจูู\n๐ \"ุฅููุธ ุงูุนููุงู ุจุฏุงุฎูู\" - ุฃูุชููู ุฑูุจูุฒ\n๐ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" - ุณุชููู ูููู\nูููุง ุฑุงุฆุนุฉ ูุดุญู ุทุงูุชู ุงูุฏุงุฎููุฉ! ๐"]],
  ["ุชุญููุฒ", ["ูุชุญููุฒ ุนูููุ ุฌุฑุจ:\n๐ \"ููุฉ ุงูุชูููุฑ ุงูุฅูุฌุงุจู\" - ููุฑูุงู ููุณูุช ุจูู\n๐ \"ุฅููุธ ุงูุนููุงู ุจุฏุงุฎูู\" - ุฃูุชููู ุฑูุจูุฒ\n๐ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" - ุณุชููู ูููู\nูููุง ุฑุงุฆุนุฉ ูุดุญู ุทุงูุชู ุงูุฏุงุฎููุฉ! ๐"]],
  ["ุงุจุบุง ุงุชุญูุฒ", ["ูุชุญููุฒ ุนูููุ ุฌุฑุจ:\n๐ \"ููุฉ ุงูุชูููุฑ ุงูุฅูุฌุงุจู\" - ููุฑูุงู ููุณูุช ุจูู\n๐ \"ุฅููุธ ุงูุนููุงู ุจุฏุงุฎูู\" - ุฃูุชููู ุฑูุจูุฒ\n๐ \"ุงูุนุงุฏุงุช ุงูุณุจุน\" - ุณุชููู ูููู\nูููุง ุฑุงุฆุนุฉ ูุดุญู ุทุงูุชู ุงูุฏุงุฎููุฉ! ๐"]],
  ["ุนูุฏู ูุณู", ["ููุชุบูุจ ุนูู ุงููุณูุ ุฌุฑุจ:\n๐ \"ูู ุงููุงูุจุงูุงุฉ\" - ูุงุฑู ูุงูุณูู\n๐ \"Atomic Habits\" - ุฌููุณ ูููุฑ\n๐ \"The 5 Second Rule\" - ููู ุฑูุจููุฒ\nูุฐู ุงููุชุจ ุฑุงุฆุนุฉ ููุณุฑ ุฏุงุฆุฑุฉ ุงูุชุณููู! ๐ช"]],
  ["ูุง ุนูุฏู ุญูุงุณ", ["ูุฅุนุงุฏุฉ ุงูุดุญูุ ุฌุฑุจ:\n๐ \"The Energy Bus\" - ุฌูู ุฌูุฑุฏูู\n๐ \"ูู ุงูุจุฏุงูุฉ\" - ุฌุงู ูุงูุงุณุงูู\n๐ \"Start with Why\" - ุณูููู ุณููู\nุณุชุณุงุนุฏู ุนูู ุฅุนุงุฏุฉ ุงูุชุดุงู ุญูุงุณู! ๐ฅ"]],

  // 6. ูุชุจ ุนูู ููุณ
  ["ุนูู ููุณ", ["ุฃูุตุญู ุจูุชุงุจ \"ุฐูุงุก ุงููุดุงุนุฑ\" ู\"ุงุบุชูู ุจููุณู\"ุ ููุงููุง ุฑุงุฆุน ูู ููู ุงูููุณ ๐ญ"]],
  ["ูุชุจ ุนูู ููุณ", ["ุฃูุตุญู ุจูุชุงุจ \"ุฐูุงุก ุงููุดุงุนุฑ\" ู\"ุงุบุชูู ุจููุณู\"ุ ููุงููุง ุฑุงุฆุน ูู ููู ุงูููุณ ๐ญ"]],
  ["ุงุจุบุง ุงูุฑุง ุนู ุชุญููู ุงูุดุฎุตูู", ["ุฃูุตุญู ุจูุชุงุจ \"ุฐูุงุก ุงููุดุงุนุฑ\" ู\"ุงุบุชูู ุจููุณู\"ุ ููุงููุง ุฑุงุฆุน ูู ููู ุงูููุณ ๐ญ"]],
  ["ูุชุจ ุชููููู ููุณู", ["ุฃูุตุญู ุจูุชุงุจ \"ุฐูุงุก ุงููุดุงุนุฑ\" ู\"ุงุบุชูู ุจููุณู\"ุ ููุงููุง ุฑุงุฆุน ูู ููู ุงูููุณ ๐ญ"]],
  ["ุงุจุบุง ุดู ุนู ุงููุดุงุนุฑ", ["ุฃูุตุญู ุจูุชุงุจ \"ุฐูุงุก ุงููุดุงุนุฑ\" ู\"ุงุบุชูู ุจููุณู\"ุ ููุงููุง ุฑุงุฆุน ูู ููู ุงูููุณ ๐ญ"]],

  // 7. ูุชุจ ุนู ุงูุนูุงูุงุช ูุงูุญุจ
  ["ุนูุงูุงุช ูุญุจ", ["ูุชุงุจ \"ูุบุงุช ุงูุญุจ ุงูุฎูุณ\" ุจูุบูุฑ ูุธุฑุชู ููุนูุงูุงุช ๐"]],
  ["ุงุจุบุง ูุชุจ ุนู ุงูุนูุงูุงุช", ["ูุชุงุจ \"ูุบุงุช ุงูุญุจ ุงูุฎูุณ\" ุจูุบูุฑ ูุธุฑุชู ููุนูุงูุงุช ๐"]],
  ["ูุชุจ ุนู ุงูุญุจ", ["ูุชุงุจ \"ูุบุงุช ุงูุญุจ ุงูุฎูุณ\" ุจูุบูุฑ ูุธุฑุชู ููุนูุงูุงุช ๐"]],
  ["ููู ุงููู ุงูุทุฑู ุงูุซุงูู", ["ูุชุงุจ \"ูุบุงุช ุงูุญุจ ุงูุฎูุณ\" ุจูุบูุฑ ูุธุฑุชู ููุนูุงูุงุช ๐"]],
  ["ุงุจุบุง ุดู ุนู ุงูุชูุงุตู ุจูู ุงููุงุณ", ["ูุชุงุจ \"ูุบุงุช ุงูุญุจ ุงูุฎูุณ\" ุจูุบูุฑ ูุธุฑุชู ููุนูุงูุงุช ๐"]],

  // 8. ูุชุจ ุนู ุงูุณุนุงุฏุฉ ูุงูุฑุงุญุฉ ุงูููุณูุฉ
  ["ุณุนุงุฏู", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],
  ["ุฑุงุญู ููุณูู", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],
  ["ุงุจุบุง ุดู ูุฑูุญ ุจุงูู", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],
  ["ูุชุจ ุนู ุงูุณุนุงุฏุฉ", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],
  ["ูุชุจ ุชูุฏู ุงูููุณ", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],
  ["ุงุจุบุง ุงุฑุชุงุญ ููุณู", ["\"ุฏุน ุงูููู ูุงุจุฏุฃ ุงูุญูุงุฉ\" ู\"ูู ุงูุณุนุงุฏุฉ\" ูู ุฃุฌูู ุงููุชุจ ูู ูุงููุฌุงู ๐ผ"]],

  // 9. ูุชุจ ุนู ุงูุซูุฉ ุจุงูููุณ
  ["ุซูู ุจุงูููุณ", ["ุฌุฑุจู \"ุฃูุช ููุง ูุฑุงู ุงูุขุฎุฑูู\" ู\"ููุฉ ุงูุซูุฉ ุจุงูููุณ\" ูุงุจู ุงูุฏุฏู."]],
  ["ุงุจุบุง ุงุฒูุฏ ุซูุชู ุจููุณู", ["ุฌุฑุจู \"ุฃูุช ููุง ูุฑุงู ุงูุขุฎุฑูู\" ู\"ููุฉ ุงูุซูุฉ ุจุงูููุณ\" ูุงุจู ุงูุฏุฏู."]],
  ["ูุชุจ ุนู ุงูุฌุฑุฃุฉ", ["ุฌุฑุจู \"ุฃูุช ููุง ูุฑุงู ุงูุขุฎุฑูู\" ู\"ููุฉ ุงูุซูุฉ ุจุงูููุณ\" ูุงุจู ุงูุฏุฏู."]],
  ["ููู ุงุตูุฑ ูุงุซูู ุงูุซุฑ", ["ุฌุฑุจู \"ุฃูุช ููุง ูุฑุงู ุงูุขุฎุฑูู\" ู\"ููุฉ ุงูุซูุฉ ุจุงูููุณ\" ูุงุจู ุงูุฏุฏู."]],

  // 10. ูุชุจ ุฏูููุฉ
  ["ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
  ["ุงุจุบุง ูุชุจ ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
  ["ูุชุจ ุชููู ุงูุงููุงู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
  ["ูุชุจ ุชูุณูุฑ", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],

  // 11. ูุชุจ ุซูุงููุฉ
  ["ุซูุงููู", ["\"ูุฆุฉ ูู ุนุธูุงุก ุฃูุฉ ุงูุฅุณูุงู\" ู\"ุงูุนุงุฏุงุช ุงูุฐุฑูุฉ\" ููุชุนูู ููููุฏูู."]],
  ["ูุชุจ ุชุซูููู", ["\"ูุฆุฉ ูู ุนุธูุงุก ุฃูุฉ ุงูุฅุณูุงู\" ู\"ุงูุนุงุฏุงุช ุงูุฐุฑูุฉ\" ููุชุนูู ููููุฏูู."]],
  ["ูุชุจ ูุนูููุงุช ุนุงูู", ["\"ูุฆุฉ ูู ุนุธูุงุก ุฃูุฉ ุงูุฅุณูุงู\" ู\"ุงูุนุงุฏุงุช ุงูุฐุฑูุฉ\" ููุชุนูู ููููุฏูู."]],
  ["ูุชุจ ุงุชุนูู ูููุง", ["\"ูุฆุฉ ูู ุนุธูุงุก ุฃูุฉ ุงูุฅุณูุงู\" ู\"ุงูุนุงุฏุงุช ุงูุฐุฑูุฉ\" ููุชุนูู ููููุฏูู."]],

  // 12. ุฑูุงูุงุช ุฎูููุฉ
  ["ุฑูุงูุงุช", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ุฑุดุญ ูู ุฑูุงูุงุช", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ูุชุจ ูุตุต", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ุดู ููุชุน ุงูุฑุงู", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],

  // 13. ูุชุจ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
  ["ุงููููุฒูู", ["ุงุจุฏุฃู ุจู \"The Alchemist\" ู\"English Grammar in Use\" ๐ฌ"]],
  ["ุงุจุบุง ุงุชุนูู ุงููููุฒู", ["ุงุจุฏุฃู ุจู \"The Alchemist\" ู\"English Grammar in Use\" ๐ฌ"]],
  ["ูุชุจ ูุชูููู ูุบุชู", ["ุงุจุฏุฃู ุจู \"The Alchemist\" ู\"English Grammar in Use\" ๐ฌ"]],
  ["ููู ุงูุฑุง ูุชุจ ุงูุฌููุฒูู ุจุณูููุฉ", ["ุงุจุฏุฃู ุจู \"The Alchemist\" ู\"English Grammar in Use\" ๐ฌ"]],

  // 14. ูุชุจ ูุฌุงููุฉ ุฃู PDF
  ["ููู ุงููู ูุชุจ ูุฌุงููู", ["ุฌุฑุจู \"ููุชุจุฉ ููุฑ\" ุฃู \"Google Books\"ุ ูููุง ูููุงูุฉ ูุชุจ ูุฌุงููุฉ ๐"]],
  ["ูุชุจ ุจู ุฏู ุงู", ["ุฌุฑุจู \"ููุชุจุฉ ููุฑ\" ุฃู \"Google Books\"ุ ูููุง ูููุงูุฉ ูุชุจ ูุฌุงููุฉ ๐"]],
  ["ูููุน ุงูุฑุง ููู ุจุฏูู ูุง ุฃุดุชุฑู", ["ุฌุฑุจู \"ููุชุจุฉ ููุฑ\" ุฃู \"Google Books\"ุ ูููุง ูููุงูุฉ ูุชุจ ูุฌุงููุฉ ๐"]],

  // 15. ูุชุจ ุนู ุงููุงู ูุงููุฌุงุญ ุงููุงูู
  ["ูุชุจ ุนู ุงููููุณ", ["\"ุงูุฃุจ ุงูุบูู ูุงูุฃุจ ุงููููุฑ\" ุจุฏุงูุฉ ููุชุงุฒุฉ ููุฐูุงุก ุงููุงูู ๐ฐ"]],
  ["ููู ุงุชุนูู ุงูุงุณุชุซูุงุฑ", ["\"ุงูุฃุจ ุงูุบูู ูุงูุฃุจ ุงููููุฑ\" ุจุฏุงูุฉ ููุชุงุฒุฉ ููุฐูุงุก ุงููุงูู ๐ฐ"]],
  ["ุงุจุบุง ูุชุจ ุนู ุงูุบูู", ["\"ุงูุฃุจ ุงูุบูู ูุงูุฃุจ ุงููููุฑ\" ุจุฏุงูุฉ ููุชุงุฒุฉ ููุฐูุงุก ุงููุงูู ๐ฐ"]],

  // 16. ุงูุชุฑุงุญ ูุชุจ ูุตูุฑุฉ
  ["ูุชุจ ุฎููู", ["\"ุงูุฃููุฑ ุงูุตุบูุฑ\" ู\"ุงูุดูุฎ ูุงูุจุญุฑ\" ุฎูุงู ููููุงููู ูุนูู โจ"]],
  ["ูุง ุงุญุจ ุงููุชุจ ุงูุทูููู", ["\"ุงูุฃููุฑ ุงูุตุบูุฑ\" ู\"ุงูุดูุฎ ูุงูุจุญุฑ\" ุฎูุงู ููููุงููู ูุนูู โจ"]],
  ["ุงุจุบุง ูุชุงุจ ุตุบูุฑ ุงุฎูุตู ุจุณุฑุนู", ["\"ุงูุฃููุฑ ุงูุตุบูุฑ\" ู\"ุงูุดูุฎ ูุงูุจุญุฑ\" ุฎูุงู ููููุงููู ูุนูู โจ"]],

  // 17. ูุชุจ ุนู ุงููุชุงุจุฉ
  ["ุงุจุบุง ุงุชุนูู ุงูุชุจ", ["\"ุนู ุงููุชุงุจุฉ\" ูุณุชููู ูููุบ ู\"ููู ุชูุชุจ ุฑูุงูุฉ\" ูุบุงุฒู ุงููุตูุจู ๐"]],
  ["ููู ุงุทูุฑ ุงุณููุจู", ["\"ุนู ุงููุชุงุจุฉ\" ูุณุชููู ูููุบ ู\"ููู ุชูุชุจ ุฑูุงูุฉ\" ูุบุงุฒู ุงููุตูุจู ๐"]],
  ["ูุชุจ ุชุนูู ุงููุชุงุจู", ["\"ุนู ุงููุชุงุจุฉ\" ูุณุชููู ูููุบ ู\"ููู ุชูุชุจ ุฑูุงูุฉ\" ูุบุงุฒู ุงููุตูุจู ๐"]],

  // 18. ูุชุจ ุนู ุงููุฑุงุกุฉ
  ["ูุชุจ ุนู ุญุจ ุงููุฑุงู", ["\"ุงููุฑุงุกุฉ ุงูุฐููุฉ\" ู\"ููู ุชูุฑุฃ ูุชุงุจุงู\" ููุชุงุจูู ููููู ุฌุฏูุง."]],
  ["ููู ููุฑุง", ["\"ุงููุฑุงุกุฉ ุงูุฐููุฉ\" ู\"ููู ุชูุฑุฃ ูุชุงุจุงู\" ููุชุงุจูู ููููู ุฌุฏูุง."]],
  ["ููู ุงุชุนูู ุงูุฑุง ุจุนูู", ["\"ุงููุฑุงุกุฉ ุงูุฐููุฉ\" ู\"ููู ุชูุฑุฃ ูุชุงุจุงู\" ููุชุงุจูู ููููู ุฌุฏูุง."]],

  // 19. ูุชุจ ุนู ุงูููุช ูุงูุชูุธูู
  ["ุงุจุบุง ูุชุจ ุนู ุงูููุช", ["\"ุฅุฏุงุฑุฉ ุงูููุช\" ูุฅุจุฑุงููู ุงูููู ูู ุฃูุถู ุงููุชุจ ูู ูุงูููุถูุน โฐ"]],
  ["ุชูุธูู ุงูููุช", ["\"ุฅุฏุงุฑุฉ ุงูููุช\" ูุฅุจุฑุงููู ุงูููู ูู ุฃูุถู ุงููุชุจ ูู ูุงูููุถูุน โฐ"]],
  ["ููู ุงุณุชุบู ููุชู", ["\"ุฅุฏุงุฑุฉ ุงูููุช\" ูุฅุจุฑุงููู ุงูููู ูู ุฃูุถู ุงููุชุจ ูู ูุงูููุถูุน โฐ"]],

  // 20. ูุชุจ ุนู ุงููุฌุงุญ ุงูุดุฎุตู
  ["ุงุจุบุง ุงูุฌุญ", ["\"ุงุจุฏุฃ ุจุงูุฃูู ููู ูุงู ุตุนุจุงู\" ู\"ูู ุตูุฑ ุฅูู ูุงุญุฏ\" ููุชุงุฒูู ๐"]],
  ["ูุชุจ ุนู ุงูุทููุญ", ["\"ุงุจุฏุฃ ุจุงูุฃูู ููู ูุงู ุตุนุจุงู\" ู\"ูู ุตูุฑ ุฅูู ูุงุญุฏ\" ููุชุงุฒูู ๐"]],
  ["ุงุจุบุง ุงุชุญูุฒ", ["\"ุงุจุฏุฃ ุจุงูุฃูู ููู ูุงู ุตุนุจุงู\" ู\"ูู ุตูุฑ ุฅูู ูุงุญุฏ\" ููุชุงุฒูู ๐"]],

  // 21. ูุชุจ ุนู ุงูุทุงูุฉ ุงูุฅูุฌุงุจูุฉ
  ["ุดู ูุฑูุน ุทุงูุชู", ["\"ุทุงูุฉ ุงูููุงู\" ู\"ุณุฑู ูุงููู ุงูุฌุฐุจ\" ุจูุนุฌุจููู โจ"]],
  ["ูุชุจ ุชุญููุฒ", ["\"ุทุงูุฉ ุงูููุงู\" ู\"ุณุฑู ูุงููู ุงูุฌุฐุจ\" ุจูุนุฌุจููู โจ"]],
  ["ุงุจุบุง ุทุงู ุงูุฌุงุจูู", ["\"ุทุงูุฉ ุงูููุงู\" ู\"ุณุฑู ูุงููู ุงูุฌุฐุจ\" ุจูุนุฌุจููู โจ"]],

  // 22. ููุฏ ุงููุชุงุจุฉ
  ["ุนูุฏู ูุชุงุจู ุงุจุบุงู ุชุดูููุง", ["ุฃููุฏุ ุฃุฑุณููุง ูู ูุฑุงุญ ุฃุตุญุญูุง ูุฃุนุทูู ููุงุญุธุงุช ๐"]],
  ["ุตุญุญ ูู ูุต", ["ุฃููุฏุ ุฃุฑุณููุง ูู ูุฑุงุญ ุฃุตุญุญูุง ูุฃุนุทูู ููุงุญุธุงุช ๐"]],
  ["ุงุจุบุง ุฑุงูู ุจูุชุงุจุชู", ["ุฃููุฏุ ุฃุฑุณููุง ูู ูุฑุงุญ ุฃุตุญุญูุง ูุฃุนุทูู ููุงุญุธุงุช ๐"]],

  // 23. ุฎุฏูุฉ ุงูุนููุงุก
  ["ููู ุงูุตู ูุฎุฏูุฉ ุงูุนููุงุก", ["ุชูุฏุฑ ุชุชูุงุตู ูุนูุง ุนุจุฑ ุงูุฅูููู betweencovers@gmail.com ุฃู ููุตุฉ X @between.covers ๐"]],
  ["ุนูุฏู ูุดููู ุจุงูุทูุจ", ["ุชูุฏุฑ ุชุชูุงุตู ูุนูุง ุนุจุฑ ุงูุฅูููู betweencovers@gmail.com ุฃู ููุตุฉ X @between.covers ๐"]],
  ["ุงุจุบุง ุงุชูุงุตู ูุน ุงูุฏุนู", ["ุชูุฏุฑ ุชุชูุงุตู ูุนูุง ุนุจุฑ ุงูุฅูููู betweencovers@gmail.com ุฃู ููุตุฉ X @between.covers ๐"]],

  // 24. ุงูุฃุณุฆูุฉ ุงูุนุงูุฉ ุนู ุงูุจูุช
  ["ูุด ุชูุฏุฑ ุชุณููุ", ["ุฃูุฏุฑ ุฃุณุงุนุฏู ุจุชุฑุดูุญุงุช ูุชุจุ ููุฏ ูุชุงุจุงุชูุ ูุฅุฌุงุจุงุช ุชุฎุต ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ๐"]],
  ["ุงูุช ูุด ูุงูุฏุชูุ", ["ุฃูุฏุฑ ุฃุณุงุนุฏู ุจุชุฑุดูุญุงุช ูุชุจุ ููุฏ ูุชุงุจุงุชูุ ูุฅุฌุงุจุงุช ุชุฎุต ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ๐"]],
  ["ููู ุชุดุชุบูุ", ["ุฃูุฏุฑ ุฃุณุงุนุฏู ุจุชุฑุดูุญุงุช ูุชุจุ ููุฏ ูุชุงุจุงุชูุ ูุฅุฌุงุจุงุช ุชุฎุต ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ๐"]],

  // 25. ุฎุชุงู ุฃู ุดูุฑ ุดุฎุตู
  ["ุงุณุชูุฏุช ููู", ["ููุงูู ูุณุนุฏูู ูุงูููุ ูุฌูุฏู ูุญุงูู ุฏุนู ูุจูุฑ ูู"]],
  ["ูุฑู ูุงุฏูู ููุงูู", ["ููุงูู ูุณุนุฏูู ูุงูููุ ูุฌูุฏู ูุญุงูู ุฏุนู ูุจูุฑ ูู"]],
  ["ุดูุฑุง ุนูู ุงููุณุงุนุฏู", ["ููุงูู ูุณุนุฏูู ูุงูููุ ูุฌูุฏู ูุญุงูู ุฏุนู ูุจูุฑ ูู"]],
  // 10. ูุชุจ ุฏูููุฉ (ูุญุฏุซุฉ)
["ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
[" ูุชุจ ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
["ูุชุจ ุชููู ุงูุงููุงู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
["ูุชุจ ุชูุณูุฑ", ["ุฃูุตุญู ุจูุฑุงุกุฉ:\n๐ \"ุชูุณูุฑ ุงุจู ูุซูุฑ\"\n๐ \"ุชูุณูุฑ ุงูุทุจุฑู\"\n๐ \"ุชูุณูุฑ ุงููุฑุทุจู\"\nุณุชููุฏ ูุซูุฑ ูู ููู ุงููุฑุขู ๐ฟ"]],
["ุงุนุทููู ูุชุจ ุชูุณูุฑ ูุฑุงู", ["ุฃูุตุญู ุจูุฑุงุกุฉ:\n๐ \"ุชูุณูุฑ ุงุจู ูุซูุฑ\"\n๐ \"ุชูุณูุฑ ุงูุทุจุฑู\"\n๐ \"ุชูุณูุฑ ุงููุฑุทุจู\"\nุณุชููุฏ ูุซูุฑ ูู ููู ุงููุฑุขู ๐ฟ"]],
[" ูุชุจ ุนู ุงููุฑุงู", ["ุฃูุตุญู ุจูุฑุงุกุฉ:\n๐ \"ุชูุณูุฑ ุงุจู ูุซูุฑ\"\n๐ \"ุชูุณูุฑ ุงูุทุจุฑู\"\n๐ \"ุชูุณูุฑ ุงููุฑุทุจู\"\nุณุชููุฏ ูุซูุฑ ูู ููู ุงููุฑุขู ๐ฟ"]],
["ุงูุด ุงูุฑุง ูู ูุชุจ ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุชุจ ุงูุชูุณูุฑ ูุซู ุงุจู ูุซูุฑ ๐ฟ"]],
["ุชูุณูุฑ", ["ุฅููู ุฃูุถู 5 ูุชุจ ุชูุณูุฑ ูุฑุขู (ูู ุงูุฃุณูู ููุฃุตุนุจ):\n๐ข ุงููุจุชุฏุฆ: ุงููุฎุชุตุฑ ูู ุชูุณูุฑ ุงููุฑุขู (ูุฑูุฒ ุชูุณูุฑ)\n๐ก ุงููุชูุณุท: ุชูุณูุฑ ุงูุฌูุงููู\n๐ต ุงููุชูุฏู: ุชูุณูุฑ ุงูุณุนุฏู\n๐ฃ ุงูุนููู: ุชูุณูุฑ ุงุจู ูุซูุฑ\nโซ ุงูุฃุณุทูุฑู: ุชูุณูุฑ ุงูุทุจุฑู\nูููุง PDF ูุฌุงูู ุนูู ููุชุจุฉ ููุฑ!"]],
  ["ุฑูุงูุงุช", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ุฑุดุญ ูู ุฑูุงูุงุช", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ูุชุจ ูุตุต", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
  ["ุดู ููุชุน ุงูุฑุงู", ["\"ููุจุชุง\" ู\"ุงูููู ุงูุฃุฒุฑู\" ูู ุงูุฑูุงูุงุช ุงููู ุชุนูู ูู ุจุงูู ๐"]],
 ["ูุชุจ ุชููู ุงูุงููุงู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุงููุง ูุคุซุฑ ููููุงู ูุงุฆุฏุฉ ๐ฟ"]],
  ["ุดูู ุงูุฑุง ูู ูุชุจ ุฏูููู", ["\"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ููุชุจ ุงูุชูุณูุฑ ูุซู ุงุจู ูุซูุฑ ๐ฟ"]],
["ูุชุจ ุณูุฑุฉ", ["ุฌุฑุจ:\n๐ \"ุงูุณูุฑุฉ ุงููุจููุฉ\" ูุงุจู ูุดุงู\n๐ \"ุงูุดูุง ุจุชุนุฑูู ุญููู ุงููุตุทูู\" ูููุงุถู ุนูุงุถ ๐ธ"]],
  ["ุงุจุบุง ุงูุฑุง ุนู ุงูุฑุณูู", ["ุฌุฑุจ:\n๐ \"ุงูุณูุฑุฉ ุงููุจููุฉ\" ูุงุจู ูุดุงู\n๐ \"ุงูุดูุง\" ูููุงุถู ุนูุงุถ ๐ธ"]],
  ["ูุตุต ุนู ุงููุจู", ["ุฌุฑุจ:\n๐ \"ุงูุณูุฑุฉ ุงููุจููุฉ\" ูุงุจู ูุดุงู ๐ธ"]],
["ูุชุจ ููู", ["ุฌุฑุจ:\n๐ \"ุงูููู ุงูุฅุณูุงูู ูุฃุฏูุชู\" ููุฏูุชูุฑ ููุจุฉ ุงูุฒุญููู\n๐ \"ุงููุบูู\" ูุงุจู ูุฏุงูุฉ ๐ฟ"]],
  ["ุงุจุบุง ุงุชุนูู ููู", ["ุฌุฑุจ:\n๐ \"ุงูููู ุงูุฅุณูุงูู ูุฃุฏูุชู\" ู\"ุงููุบูู\" ๐ฟ"]],
  ["ุงุญูุงู ุงูุตูุงุฉ ูุงูุนุจุงุฏู", ["ุฌุฑุจ ูุชุจ ุงูููู ุงููุดููุฑุฉ ูุซู:\n๐ \"ุงูููู ุงูุฅุณูุงูู ูุฃุฏูุชู\" ๐ฟ"]],
  // ูุชุจ ุงูุฃุฐูุงุฑ ูุงูุชููู
  ["ูุชุจ ุงุฐูุงุฑ", ["ุฌุฑุจ:\n๐ \"ุญุตู ุงููุณูู\" ู\"ุงูุฃุฐูุงุฑ\" ูููููู ๐ฟ"]],
  ["ุงุจุบุง ุงุฐูุงุฑ ููููู", ["ุฌุฑุจ:\n๐ \"ุญุตู ุงููุณูู\" ู\"ุงูุฃุฐูุงุฑ\" ูููููู ๐ฟ"]],
  ["ูุชุจ ุชููู", ["ุฌุฑุจ:\n๐ \"ุฑูุงุถ ุงูุตุงูุญูู\" ู\"ูู ุธูุงู ุงููุฑุขู\" ๐ฟ"]],
 ["ุงุจุบุง ุงุนุฑู ุนู ุงูุงุณูุงู", ["ููููู ูุฑุงุกุฉ:\n๐ \"ููุฏูุฉ ูู ุงูุฅุณูุงู\" ู\"ุงููุฑุขู ุงููุฑูู\" ๐ฟ"]],
  ["ุดูู ุฃุนูู ุนุดุงู ุงุชูุฑุจ ููู", ["ุงุจุฏุฃ ุจุงููุฑุงุกุฉุ ุงูุตูุงุฉุ ุงูุฐูุฑุ ูุงูุชููู ๐ธ"]],
  ["ุงุจุบุง ุงุนุฑู ูุตุต ุงูุงูุจูุงุก", ["ุฌุฑุจ:\n๐ \"ูุตุต ุงูุฃูุจูุงุก\" ูุงุจู ูุซูุฑ ๐ฟ"]],
  ["ููู ุงุชุนูู ุตุญูุญ ุงูุฏูู", ["ุงุจุฏุฃ ุจุงููุฑุขู ุงููุฑููุ ุงูุฃุญุงุฏูุซ ุงูุตุญูุญุฉุ ููุชุจ ุงูููู ูุงูุณูุฑุฉ ๐ฟ"]],
  // ุฃุถู ุฏุงุฎู ุงูู Map
["ุงูุด ุงูุถู ูุชุงุจ ุฏููู ูููุจุชุฏุฆูู", ["ุฑูุงุถ ุงูุตุงูุญูู + ูุง ุชุญุฒู + ุงูุฃุฑุจุนูู ุงูููููุฉ ๐"]],
["ุงุจุบุง ูุชุงุจ ุนู ุงูุตูุงู", ["ุตูุฉ ุตูุงุฉ ุงููุจู ๏ทบ ููุฃูุจุงูู - ุฃุญุณู ูุชุงุจ ูู ุงูููุถูุน!"]],
["ุชูุณูุฑ ุงูุฌูุงููู ูุด ุฑุฃูู ููู", ["ุณูู ุฌุฏูุง ูููุชุนุ ูุซุงูู ูููุจุชุฏุฆูู ๐ก"]],
["ุงูุถู ุชูุณูุฑ ูููุจุชุฏุฆูู", ["ุงููุฎุชุตุฑ ูู ุชูุณูุฑ ุงููุฑุขู - ุฃุณูู ุดูุก ูู ุงูุฏููุง!"]],
["ูุชุจ ุงุณูุงููู ูุฌุงููู", ["ูู ุงููุชุจ ุงููู ููู ููุฌูุฏุฉ ูุฌุงููุง ุนูู ููุชุจุฉ ููุฑ ูุดูุณ ุงููุนุงุฑู!"]],

  // 1. ุฃูุถู ูุชุจ ุงูุฑูุงูุงุช
  ["ุฃูุถู ุฑูุงูุงุช", ["ุฃูุตุญู ุจูุฑุงุกุฉ \"ููุจุชุง\" ุฃู \"ุงูููู ุงูุฃุฒุฑู\"ุ ุฑูุงูุงุช ููุชุนุฉ ุฌุฏูุง ๐"]],
  ["ุฃู ุฑูุงูุงุช ุฃูุตุญ ุจูุง", ["ุฃูุตุญู ุจูุฑุงุกุฉ \"ููุจุชุง\" ุฃู \"ุงูููู ุงูุฃุฒุฑู\"ุ ุฑูุงูุงุช ููุชุนุฉ ุฌุฏูุง ๐"]],
  ["ูุด ุฃุญุณู ุฑูุงูุฉ ุฃูุฑุฃูุง", ["ุฃูุตุญู ุจูุฑุงุกุฉ \"ููุจุชุง\" ุฃู \"ุงูููู ุงูุฃุฒุฑู\"ุ ุฑูุงูุงุช ููุชุนุฉ ุฌุฏูุง ๐"]],
  ["ุงูุชุฑุญ ูู ุฑูุงูุงุช ูุดููุฑุฉ", ["ุฃูุตุญู ุจูุฑุงุกุฉ \"ููุจุชุง\" ุฃู \"ุงูููู ุงูุฃุฒุฑู\"ุ ุฑูุงูุงุช ููุชุนุฉ ุฌุฏูุง ๐"]],

  // 2. ูุชุจ ุงูุฎูุงู ุงูุนููู
  ["ูุชุจ ุฎูุงู ุนููู", ["ุฌุฑุจ \"Dune\" ู\"Ender's Game\"ุ ููุชุนูู ูุนุดุงู ุงูุฎูุงู ุงูุนููู ๐"]],
  ["ุฃู ูุชุจ ุฎูุงู ุนููู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Dune\" ู\"Ender's Game\"ุ ููุชุนูู ูุนุดุงู ุงูุฎูุงู ุงูุนููู ๐"]],
  ["ุงูุชุฑุญ ูู ุฑูุงูุงุช ุฎูุงู ุนููู", ["ุฌุฑุจ \"Dune\" ู\"Ender's Game\"ุ ููุชุนูู ูุนุดุงู ุงูุฎูุงู ุงูุนููู ๐"]],
  ["ูุด ุฃุญุณู ูุชุงุจ ุฎูุงู ุนููู", ["ุฌุฑุจ \"Dune\" ู\"Ender's Game\"ุ ููุชุนูู ูุนุดุงู ุงูุฎูุงู ุงูุนููู ๐"]],

  // 3. ูุชุจ ุชุงุฑูุฎูุฉ
  ["ูุชุจ ุชุงุฑูุฎ", ["ุฃูุตุญ ุจูุฑุงุกุฉ \"Sapiens\" ู\"Guns, Germs, and Steel\" ูููู ุงูุชุงุฑูุฎ ุจุดูู ููุชุน ๐"]],
  ["ุฃู ูุชุจ ุชุงุฑูุฎูุฉ ุฃูุตุญ ุจูุง", ["ุฃูุตุญ ุจูุฑุงุกุฉ \"Sapiens\" ู\"Guns, Germs, and Steel\" ูููู ุงูุชุงุฑูุฎ ุจุดูู ููุชุน ๐"]],
  ["ุงูุชุฑุญ ูุชุจ ุชุงุฑูุฎ", ["ุฃูุตุญ ุจูุฑุงุกุฉ \"Sapiens\" ู\"Guns, Germs, and Steel\" ูููู ุงูุชุงุฑูุฎ ุจุดูู ููุชุน ๐"]],
  ["ูุด ุฃุญุณู ูุชุงุจ ุชุงุฑูุฎู", ["ุฃูุตุญ ุจูุฑุงุกุฉ \"Sapiens\" ู\"Guns, Germs, and Steel\" ูููู ุงูุชุงุฑูุฎ ุจุดูู ููุชุน ๐"]],

  // 4. ูุชุจ ุนูููุฉ
  ["ูุชุจ ุนูู", ["ุฌุฑุจ \"A Brief History of Time\" ู\"Cosmos\" ูุชุจุณูุท ุงูุนููู ุจุทุฑููุฉ ุฑุงุฆุนุฉ ๐ฌ"]],
  ["ุฃู ูุชุจ ุนูููุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"A Brief History of Time\" ู\"Cosmos\" ูุชุจุณูุท ุงูุนููู ุจุทุฑููุฉ ุฑุงุฆุนุฉ ๐ฌ"]],
  ["ุงูุชุฑุญ ูู ูุชุจ ุนูู", ["ุฌุฑุจ \"A Brief History of Time\" ู\"Cosmos\" ูุชุจุณูุท ุงูุนููู ุจุทุฑููุฉ ุฑุงุฆุนุฉ ๐ฌ"]],
  ["ูุด ุฃูุถู ูุชุงุจ ุนููู", ["ุฌุฑุจ \"A Brief History of Time\" ู\"Cosmos\" ูุชุจุณูุท ุงูุนููู ุจุทุฑููุฉ ุฑุงุฆุนุฉ ๐ฌ"]],

  // 5. ูุชุจ ููุฏ ุงูุฃุฏุจ
  ["ููู ุฃููู ูุชุงุจ", ["ุงุจุฏุฃ ุจุงููุธุฑ ูููุตุฉ ูุงูุดุฎุตูุงุช ูุงูุฃุณููุจุ ุซู ููู ุงููุญุชูู ุจุดูู ููุถูุนู โ๏ธ"]],
  ["ุทุฑู ููุฏ ุงููุชุจ", ["ุงุจุฏุฃ ุจุงููุธุฑ ูููุตุฉ ูุงูุดุฎุตูุงุช ูุงูุฃุณููุจุ ุซู ููู ุงููุญุชูู ุจุดูู ููุถูุนู โ๏ธ"]],
  ["ููููุฉ ุชูููู ูุชุงุจ", ["ุงุจุฏุฃ ุจุงููุธุฑ ูููุตุฉ ูุงูุดุฎุตูุงุช ูุงูุฃุณููุจุ ุซู ููู ุงููุญุชูู ุจุดูู ููุถูุนู โ๏ธ"]],
  ["ููุฏ ูุชุงุจ", ["ุงุจุฏุฃ ุจุงููุธุฑ ูููุตุฉ ูุงูุดุฎุตูุงุช ูุงูุฃุณููุจุ ุซู ููู ุงููุญุชูู ุจุดูู ููุถูุนู โ๏ธ"]],

  // 6. ูุชุจ ุงูููุณูุฉ
  ["ูุชุจ ููุณูุฉ", ["ุฌุฑุจ \"Sophie's World\" ู\"The Republic\" ูููู ุงูููุฑ ุงูููุณูู ๐ง"]],
  ["ุฃู ูุชุจ ููุณููุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Sophie's World\" ู\"The Republic\" ูููู ุงูููุฑ ุงูููุณูู ๐ง"]],
  ["ุงูุชุฑุญ ูุชุจ ููุณูุฉ", ["ุฌุฑุจ \"Sophie's World\" ู\"The Republic\" ูููู ุงูููุฑ ุงูููุณูู ๐ง"]],
  ["ูุด ุฃูุถู ูุชุงุจ ููุณูู", ["ุฌุฑุจ \"Sophie's World\" ู\"The Republic\" ูููู ุงูููุฑ ุงูููุณูู ๐ง"]],

  // 7. ูุชุจ ุงูุฃุทูุงู
  ["ูุชุจ ุฃุทูุงู", ["ุฌุฑุจ \"The Little Prince\" ู\"Charlie and the Chocolate Factory\" ููุฃุทูุงู ๐"]],
  ["ุฃู ูุชุจ ููุฃุทูุงู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Little Prince\" ู\"Charlie and the Chocolate Factory\" ููุฃุทูุงู ๐"]],
  ["ุงูุชุฑุญ ูุชุจ ููุฃุทูุงู", ["ุฌุฑุจ \"The Little Prince\" ู\"Charlie and the Chocolate Factory\" ููุฃุทูุงู ๐"]],
  ["ูุด ุฃุญุณู ูุชุงุจ ููุฃุทูุงู", ["ุฌุฑุจ \"The Little Prince\" ู\"Charlie and the Chocolate Factory\" ููุฃุทูุงู ๐"]],

  // 8. ูุชุจ ุนู ุงููู
  ["ูุชุจ ูู", ["ุฌุฑุจ \"The Story of Art\" ู\"Ways of Seeing\" ูููู ุงููู ุจุดูู ููุชุน ๐จ"]],
  ["ุฃู ูุชุจ ูู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Story of Art\" ู\"Ways of Seeing\" ูููู ุงููู ุจุดูู ููุชุน ๐จ"]],
  ["ุงูุชุฑุญ ูุชุจ ุนู ุงููู", ["ุฌุฑุจ \"The Story of Art\" ู\"Ways of Seeing\" ูููู ุงููู ุจุดูู ููุชุน ๐จ"]],
  ["ูุด ุฃูุถู ูุชุงุจ ูู", ["ุฌุฑุจ \"The Story of Art\" ู\"Ways of Seeing\" ูููู ุงููู ุจุดูู ููุชุน ๐จ"]],

  // 9. ูุชุจ ุนู ุงูุณูุฑ
  ["ูุชุจ ุณูุฑ", ["ุฌุฑุจ \"Into the Wild\" ู\"Vagabonding\" ูุนุดุงู ุงูุณูุฑ ๐"]],
  ["ุฃู ูุชุจ ุณูุฑ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Into the Wild\" ู\"Vagabonding\" ูุนุดุงู ุงูุณูุฑ ๐"]],
  ["ุงูุชุฑุญ ูุชุจ ุณูุฑ", ["ุฌุฑุจ \"Into the Wild\" ู\"Vagabonding\" ูุนุดุงู ุงูุณูุฑ ๐"]],
  ["ูุด ุฃูุถู ูุชุงุจ ุณูุฑ", ["ุฌุฑุจ \"Into the Wild\" ู\"Vagabonding\" ูุนุดุงู ุงูุณูุฑ ๐"]],

  // 10. ูุชุจ ุงูุดุนุฑ
  ["ูุชุจ ุดุนุฑ", ["ุฌุฑุจ \"Diwan Hafez\" ู\"Leaves of Grass\" ูุนุดุงู ุงูุดุนุฑ โจ"]],
  ["ุฃู ูุชุจ ุดุนุฑ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Diwan Hafez\" ู\"Leaves of Grass\" ูุนุดุงู ุงูุดุนุฑ โจ"]],
  ["ุงูุชุฑุญ ูุชุจ ุดุนุฑ", ["ุฌุฑุจ \"Diwan Hafez\" ู\"Leaves of Grass\" ูุนุดุงู ุงูุดุนุฑ โจ"]],
  ["ูุด ุฃูุถู ูุชุงุจ ุดุนุฑ", ["ุฌุฑุจ \"Diwan Hafez\" ู\"Leaves of Grass\" ูุนุดุงู ุงูุดุนุฑ โจ"]],
  ["ูุชุจ ุทุจ", ["ุฌุฑุจ \"The Emperor of All Maladies\" ูููู ุชุงุฑูุฎ ุงูุทุจ ูุงูุฃูุฑุงุถ ๐ฉบ"]],
["ุฃู ูุชุจ ุทุจูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Emperor of All Maladies\" ูููู ุชุงุฑูุฎ ุงูุทุจ ูุงูุฃูุฑุงุถ ๐ฉบ"]],
["ุงูุชุฑุญ ูุชุจ ุทุจ", ["ุฌุฑุจ \"The Emperor of All Maladies\" ูููู ุชุงุฑูุฎ ุงูุทุจ ูุงูุฃูุฑุงุถ ๐ฉบ"]],
["ูุด ุฃูุถู ูุชุงุจ ุทุจู", ["ุฌุฑุจ \"The Emperor of All Maladies\" ูููู ุชุงุฑูุฎ ุงูุทุจ ูุงูุฃูุฑุงุถ ๐ฉบ"]],

// 22. ูุชุจ ุนู ุงูุชูููููุฌูุง
["ูุชุจ ุชูููููุฌูุง", ["ุฌุฑุจ \"The Innovators\" ู\"Hooked\" ูููู ุงูุชุทูุฑ ุงูุชููู ๐ป"]],
["ุฃู ูุชุจ ุชูููููุฌูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Innovators\" ู\"Hooked\" ูููู ุงูุชุทูุฑ ุงูุชููู ๐ป"]],
["ุงูุชุฑุญ ูุชุจ ุชูููููุฌูุง", ["ุฌุฑุจ \"The Innovators\" ู\"Hooked\" ูููู ุงูุชุทูุฑ ุงูุชููู ๐ป"]],
["ูุด ุฃูุถู ูุชุงุจ ุชูููููุฌูุง", ["ุฌุฑุจ \"The Innovators\" ู\"Hooked\" ูููู ุงูุชุทูุฑ ุงูุชููู ๐ป"]],

// 23. ูุชุจ ุงูุฌุฑููุฉ ูุงูุบููุถ
["ูุชุจ ุบููุถ", ["ุฌุฑุจ \"Gone Girl\" ู\"Sherlock Holmes\" ูุนุดุงู ุงูุฌุฑููุฉ ูุงูุบููุถ ๐ต๏ธโโ๏ธ"]],
["ุฃู ูุชุจ ุฌุฑููุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Gone Girl\" ู\"Sherlock Holmes\" ูุนุดุงู ุงูุฌุฑููุฉ ูุงูุบููุถ ๐ต๏ธโโ๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ุบููุถ", ["ุฌุฑุจ \"Gone Girl\" ู\"Sherlock Holmes\" ูุนุดุงู ุงูุฌุฑููุฉ ูุงูุบููุถ ๐ต๏ธโโ๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ุบููุถ", ["ุฌุฑุจ \"Gone Girl\" ู\"Sherlock Holmes\" ูุนุดุงู ุงูุฌุฑููุฉ ูุงูุบููุถ ๐ต๏ธโโ๏ธ"]],

// 24. ูุชุจ ุนู ุงูุณูุงุฑุงุช ูุงููููุงูููุง
["ูุชุจ ุณูุงุฑุงุช", ["ุฌุฑุจ \"Car: The Definitive Visual History\" ูุนุดุงู ุงูุณูุงุฑุงุช ๐"]],
["ุฃู ูุชุจ ูููุงูููุง ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Car: The Definitive Visual History\" ูุนุดุงู ุงูุณูุงุฑุงุช ๐"]],
["ุงูุชุฑุญ ูุชุจ ุณูุงุฑุงุช", ["ุฌุฑุจ \"Car: The Definitive Visual History\" ูุนุดุงู ุงูุณูุงุฑุงุช ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ุณูุงุฑุงุช", ["ุฌุฑุจ \"Car: The Definitive Visual History\" ูุนุดุงู ุงูุณูุงุฑุงุช ๐"]],

// 25. ูุชุจ ุนู ุงูุฃุทุนูุฉ ูุงูุทูู
["ูุชุจ ุทุจุฎ", ["ุฌุฑุจ \"Salt, Fat, Acid, Heat\" ูุชุนูู ุงูุทูู ุจุดูู ุงุญุชุฑุงูู ๐ณ"]],
["ุฃู ูุชุจ ุทุจุฎ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Salt, Fat, Acid, Heat\" ูุชุนูู ุงูุทูู ุจุดูู ุงุญุชุฑุงูู ๐ณ"]],
["ุงูุชุฑุญ ูุชุจ ุทุจุฎ", ["ุฌุฑุจ \"Salt, Fat, Acid, Heat\" ูุชุนูู ุงูุทูู ุจุดูู ุงุญุชุฑุงูู ๐ณ"]],
["ูุด ุฃูุถู ูุชุงุจ ุทุจุฎ", ["ุฌุฑุจ \"Salt, Fat, Acid, Heat\" ูุชุนูู ุงูุทูู ุจุดูู ุงุญุชุฑุงูู ๐ณ"]],
// 26. ูุชุจ ุนู ุงูููุณูุฉ
["ูุชุจ ููุณูุฉ", ["ุฌุฑุจ \"Sophie's World\" ู\"Meditations\" ูููู ุงูููุฑ ุงูููุณูู ๐ค"]],
["ุฃู ูุชุจ ููุณููุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Sophie's World\" ู\"Meditations\" ูููู ุงูููุฑ ุงูููุณูู ๐ค"]],
["ุงูุชุฑุญ ูุชุจ ููุณูุฉ", ["ุฌุฑุจ \"Sophie's World\" ู\"Meditations\" ูููู ุงูููุฑ ุงูููุณูู ๐ค"]],
["ูุด ุฃูุถู ูุชุงุจ ููุณูุฉ", ["ุฌุฑุจ \"Sophie's World\" ู\"Meditations\" ูููู ุงูููุฑ ุงูููุณูู ๐ค"]],

// 27. ูุชุจ ุนู ุงูุนููู ุงูุงุฌุชูุงุนูุฉ
["ูุชุจ ุนููู ุงุฌุชูุงุนูุฉ", ["ุฌุฑุจ \"Guns, Germs, and Steel\" ูููู ุชุทูุฑ ุงููุฌุชูุนุงุช ๐"]],
["ุฃู ูุชุจ ุงุฌุชูุงุนูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Guns, Germs, and Steel\" ูููู ุชุทูุฑ ุงููุฌุชูุนุงุช ๐"]],
["ุงูุชุฑุญ ูุชุจ ุนููู ุงุฌุชูุงุนูุฉ", ["ุฌุฑุจ \"Guns, Germs, and Steel\" ูููู ุชุทูุฑ ุงููุฌุชูุนุงุช ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ุนููู ุงุฌุชูุงุนูุฉ", ["ุฌุฑุจ \"Guns, Germs, and Steel\" ูููู ุชุทูุฑ ุงููุฌุชูุนุงุช ๐"]],

// 28. ูุชุจ ุนูููุฉ ููุฃุทูุงู ูุงูุดุจุงุจ
["ูุชุจ ุนูููุฉ ููุฃุทูุงู", ["ุฌุฑุจ \"Ada Lace\" ู\"Women in Science\" ูุชุดุฌูุน ุงููุถูู ุงูุนููู ๐งช"]],
["ุฃู ูุชุจ ุนูููุฉ ุดุจุงุจูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Ada Lace\" ู\"Women in Science\" ูุชุดุฌูุน ุงููุถูู ุงูุนููู ๐งช"]],
["ุงูุชุฑุญ ูุชุจ ุนูููุฉ ููุดุจุงุจ", ["ุฌุฑุจ \"Ada Lace\" ู\"Women in Science\" ูุชุดุฌูุน ุงููุถูู ุงูุนููู ๐งช"]],
["ูุด ุฃูุถู ูุชุงุจ ุนููู ููุดุจุงุจ", ["ุฌุฑุจ \"Ada Lace\" ู\"Women in Science\" ูุชุดุฌูุน ุงููุถูู ุงูุนููู ๐งช"]],

// 29. ูุชุจ ุงูููุฏ ุงูุฃุฏุจู
["ูุชุจ ููุฏ ุฃุฏุจู", ["ุฌุฑุจ \"How to Read Literature Like a Professor\" ูููู ุชุญููู ุงููุตูุต ๐"]],
["ุฃู ูุชุจ ููุฏูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"How to Read Literature Like a Professor\" ูููู ุชุญููู ุงููุตูุต ๐"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุฃุฏุจู", ["ุฌุฑุจ \"How to Read Literature Like a Professor\" ูููู ุชุญููู ุงููุตูุต ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุฃุฏุจู", ["ุฌุฑุจ \"How to Read Literature Like a Professor\" ูููู ุชุญููู ุงููุตูุต ๐"]],

// 30. ูุชุจ ุงูุชุงุฑูุฎ ุงูุนุงู
["ูุชุจ ุชุงุฑูุฎ", ["ุฌุฑุจ \"A People's History of the World\" ูููู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ ๐ฐ"]],
["ุฃู ูุชุจ ุชุงุฑูุฎูุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"A People's History of the World\" ูููู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ ๐ฐ"]],
["ุงูุชุฑุญ ูุชุจ ุชุงุฑูุฎ", ["ุฌุฑุจ \"A People's History of the World\" ูููู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ ๐ฐ"]],
["ูุด ุฃูุถู ูุชุงุจ ุชุงุฑูุฎ", ["ุฌุฑุจ \"A People's History of the World\" ูููู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ ๐ฐ"]],

// 31. ูุชุจ ุงูุณูุฑ ูุงููุบุงูุฑุงุช
["ูุชุจ ูุบุงูุฑุงุช", ["ุฌุฑุจ \"Into the Wild\" ู\"The Lost City of Z\" ูุชุฌุฑุจุฉ ุฑุญูุงุช ููุบุงูุฑุงุช ๐"]],
["ุฃู ูุชุจ ูุบุงูุฑุงุช ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Into the Wild\" ู\"The Lost City of Z\" ูุชุฌุฑุจุฉ ุฑุญูุงุช ููุบุงูุฑุงุช ๐"]],
["ุงูุชุฑุญ ูุชุจ ุณูุฑ ููุบุงูุฑุงุช", ["ุฌุฑุจ \"Into the Wild\" ู\"The Lost City of Z\" ูุชุฌุฑุจุฉ ุฑุญูุงุช ููุบุงูุฑุงุช ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ูุบุงูุฑุงุช", ["ุฌุฑุจ \"Into the Wild\" ู\"The Lost City of Z\" ูุชุฌุฑุจุฉ ุฑุญูุงุช ููุบุงูุฑุงุช ๐"]],

// 32. ูุชุจ ุนู ุงูุชุตููู ุงูุฏุงุฎูู ูุงููููู
["ูุชุจ ุชุตููู ุฏุงุฎูู", ["ุฌุฑุจ \"Domino: The Book of Decorating\" ูุชุนูู ูู ุงูุชุตููู ุงูุฏุงุฎูู ๐๏ธ"]],
["ุฃู ูุชุจ ุฏูููุฑ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Domino: The Book of Decorating\" ูุชุนูู ูู ุงูุชุตููู ุงูุฏุงุฎูู ๐๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ูููู ูุชุตููู", ["ุฌุฑุจ \"Domino: The Book of Decorating\" ูุชุนูู ูู ุงูุชุตููู ุงูุฏุงุฎูู ๐๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ุชุตููู ุฏุงุฎูู", ["ุฌุฑุจ \"Domino: The Book of Decorating\" ูุชุนูู ูู ุงูุชุตููู ุงูุฏุงุฎูู ๐๏ธ"]],

// 33. ูุชุจ ุนู ุงูุดุนุฑ
["ูุชุจ ุดุนุฑ", ["ุฌุฑุจ ุฃุนูุงู \"Rumi\" ู\"Pablo Neruda\" ููุงุณุชูุชุงุน ุจุงูุดุนุฑ ุงูุนููู โ๏ธ"]],
["ุฃู ูุชุจ ุดุนุฑ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ ุฃุนูุงู \"Rumi\" ู\"Pablo Neruda\" ููุงุณุชูุชุงุน ุจุงูุดุนุฑ ุงูุนููู โ๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ุดุนุฑ", ["ุฌุฑุจ ุฃุนูุงู \"Rumi\" ู\"Pablo Neruda\" ููุงุณุชูุชุงุน ุจุงูุดุนุฑ ุงูุนููู โ๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ุดุนุฑ", ["ุฌุฑุจ ุฃุนูุงู \"Rumi\" ู\"Pablo Neruda\" ููุงุณุชูุชุงุน ุจุงูุดุนุฑ ุงูุนููู โ๏ธ"]],

// 34. ูุชุจ ุนู ุงูุฑูุงูุงุช ุงูููุงุณูููุฉ
["ูุชุจ ููุงุณูููุฉ", ["ุฌุฑุจ \"Pride and Prejudice\" ู\"War and Peace\" ููุงุณุชูุชุงุน ุจุงูููุงุณูููุงุช ๐"]],
["ุฃู ุฑูุงูุงุช ููุงุณูููุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Pride and Prejudice\" ู\"War and Peace\" ููุงุณุชูุชุงุน ุจุงูููุงุณูููุงุช ๐"]],
["ุงูุชุฑุญ ูุชุจ ููุงุณูููุฉ", ["ุฌุฑุจ \"Pride and Prejudice\" ู\"War and Peace\" ููุงุณุชูุชุงุน ุจุงูููุงุณูููุงุช ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ููุงุณููู", ["ุฌุฑุจ \"Pride and Prejudice\" ู\"War and Peace\" ููุงุณุชูุชุงุน ุจุงูููุงุณูููุงุช ๐"]],

// 35. ูุชุจ ุนู ุงูุฑูุงูุงุช ุงูุญุฏูุซุฉ
["ูุชุจ ุฑูุงูุงุช ุญุฏูุซุฉ", ["ุฌุฑุจ \"The Night Circus\" ู\"Circe\" ูุฑูุงูุงุช ูุนุงุตุฑุฉ ุดููุฉ โจ"]],
["ุฃู ุฑูุงูุงุช ุญุฏูุซุฉ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Night Circus\" ู\"Circe\" ูุฑูุงูุงุช ูุนุงุตุฑุฉ ุดููุฉ โจ"]],
["ุงูุชุฑุญ ูุชุจ ุญุฏูุซุฉ", ["ุฌุฑุจ \"The Night Circus\" ู\"Circe\" ูุฑูุงูุงุช ูุนุงุตุฑุฉ ุดููุฉ โจ"]],
["ูุด ุฃูุถู ุฑูุงูุฉ ุญุฏูุซุฉ", ["ุฌุฑุจ \"The Night Circus\" ู\"Circe\" ูุฑูุงูุงุช ูุนุงุตุฑุฉ ุดููุฉ โจ"]],

// 36.ูุชุจ ุนู ุงูููุฏ ุงูููุณูู

["ูุชุจ ููุฏ ููุณูู", ["ุฌุฑุจ \"Critique of Pure Reason\" ูุชุญููู ุงูููุฏ ุงูููุณูู ๐ง"]],
["ุฃู ูุชุจ ููุฏ ููุณูู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Critique of Pure Reason\" ูุชุญููู ุงูููุฏ ุงูููุณูู ๐ง"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ููุณูู", ["ุฌุฑุจ \"Critique of Pure Reason\" ูุชุญููู ุงูููุฏ ุงูููุณูู ๐ง"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ููุณูู", ["ุฌุฑุจ \"Critique of Pure Reason\" ูุชุญููู ุงูููุฏ ุงูููุณูู ๐ง"]],

// 37. ูุชุจ ุนู ุงูููุฏ ุงูุชุงุฑูุฎู
["ูุชุจ ููุฏ ุชุงุฑูุฎู", ["ุฌุฑุจ \"The Historian's Craft\" ูุชุญููู ุงูุชุงุฑูุฎ ุงูููุฏู ๐บ"]],
["ุฃู ูุชุจ ููุฏ ุชุงุฑูุฎู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Historian's Craft\" ูุชุญููู ุงูุชุงุฑูุฎ ุงูููุฏู ๐บ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุชุงุฑูุฎู", ["ุฌุฑุจ \"The Historian's Craft\" ูุชุญููู ุงูุชุงุฑูุฎ ุงูููุฏู ๐บ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุชุงุฑูุฎู", ["ุฌุฑุจ \"The Historian's Craft\" ูุชุญููู ุงูุชุงุฑูุฎ ุงูููุฏู ๐บ"]],

// 38. ูุชุจ ุนู ุงูููุฏ ุงูุฃุฏุจู ุงูุญุฏูุซ
["ูุชุจ ููุฏ ุฃุฏุจู ุญุฏูุซ", ["ุฌุฑุจ \"Literary Theory: An Introduction\" ูููู ุงูููุฏ ุงูุฃุฏุจู ุงูุญุฏูุซ ๐"]],
["ุฃู ูุชุจ ููุฏ ุฃุฏุจู ุญุฏูุซ ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Literary Theory: An Introduction\" ูููู ุงูููุฏ ุงูุฃุฏุจู ุงูุญุฏูุซ ๐"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุฃุฏุจู ุญุฏูุซ", ["ุฌุฑุจ \"Literary Theory: An Introduction\" ูููู ุงูููุฏ ุงูุฃุฏุจู ุงูุญุฏูุซ ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุฃุฏุจู ุญุฏูุซ", ["ุฌุฑุจ \"Literary Theory: An Introduction\" ูููู ุงูููุฏ ุงูุฃุฏุจู ุงูุญุฏูุซ ๐"]],

// 39. ูุชุจ ุนู ุงูููุฏ ุงูููู
["ูุชุจ ููุฏ ููู", ["ุฌุฑุจ \"Ways of Seeing\" ูุชุญููู ุงููู ุงูุจุตุฑู ๐จ"]],
["ุฃู ูุชุจ ููุฏ ููู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Ways of Seeing\" ูุชุญููู ุงููู ุงูุจุตุฑู ๐จ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ููู", ["ุฌุฑุจ \"Ways of Seeing\" ูุชุญููู ุงููู ุงูุจุตุฑู ๐จ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ููู", ["ุฌุฑุจ \"Ways of Seeing\" ูุชุญููู ุงููู ุงูุจุตุฑู ๐จ"]],

// 40. ูุชุจ ุนู ุงูููุฏ ุงูููุณููู
["ูุชุจ ููุฏ ููุณููู", ["ุฌุฑุจ \"How to Listen to Music\" ูููู ููุฏ ุงูููุณููู ๐ถ"]],
["ุฃู ูุชุจ ููุฏ ููุณููู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"How to Listen to Music\" ูููู ููุฏ ุงูููุณููู ๐ถ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ููุณููู", ["ุฌุฑุจ \"How to Listen to Music\" ูููู ููุฏ ุงูููุณููู ๐ถ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ููุณููู", ["ุฌุฑุจ \"How to Listen to Music\" ูููู ููุฏ ุงูููุณููู ๐ถ"]],

// 41. ูุชุจ ุนู ุงูููุฏ ุงูุซูุงูู
["ูุชุจ ููุฏ ุซูุงูู", ["ุฌุฑุจ \"Culture and Anarchy\" ูููู ุงูููุฏ ุงูุซูุงูู ๐"]],
["ุฃู ูุชุจ ููุฏ ุซูุงูู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Culture and Anarchy\" ูููู ุงูููุฏ ุงูุซูุงูู ๐"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุซูุงูู", ["ุฌุฑุจ \"Culture and Anarchy\" ูููู ุงูููุฏ ุงูุซูุงูู ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุซูุงูู", ["ุฌุฑุจ \"Culture and Anarchy\" ูููู ุงูููุฏ ุงูุซูุงูู ๐"]],

// 42. ูุชุจ ุนู ุงูููุฏ ุงูุณูุงุณู
["ูุชุจ ููุฏ ุณูุงุณู", ["ุฌุฑุจ \"Manufacturing Consent\" ูููู ููุฏ ุงูุฅุนูุงู ูุงูุณูุงุณุฉ ๐๏ธ"]],
["ุฃู ูุชุจ ููุฏ ุณูุงุณู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Manufacturing Consent\" ูููู ููุฏ ุงูุฅุนูุงู ูุงูุณูุงุณุฉ ๐๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุณูุงุณู", ["ุฌุฑุจ \"Manufacturing Consent\" ูููู ููุฏ ุงูุฅุนูุงู ูุงูุณูุงุณุฉ ๐๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุณูุงุณู", ["ุฌุฑุจ \"Manufacturing Consent\" ูููู ููุฏ ุงูุฅุนูุงู ูุงูุณูุงุณุฉ ๐๏ธ"]],

// 43. ูุชุจ ุนู ุงูููุฏ ุงูุนููู
["ูุชุจ ููุฏ ุนููู", ["ุฌุฑุจ \"The Structure of Scientific Revolutions\" ูููู ููุฏ ุงูุนูู ๐ฌ"]],
["ุฃู ูุชุจ ููุฏ ุนููู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Structure of Scientific Revolutions\" ูููู ููุฏ ุงูุนูู ๐ฌ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุนููู", ["ุฌุฑุจ \"The Structure of Scientific Revolutions\" ูููู ููุฏ ุงูุนูู ๐ฌ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุนููู", ["ุฌุฑุจ \"The Structure of Scientific Revolutions\" ูููู ููุฏ ุงูุนูู ๐ฌ"]],

// 44. ูุชุจ ุนู ุงูููุฏ ุงูุงุฌุชูุงุนู
["ูุชุจ ููุฏ ุงุฌุชูุงุนู", ["ุฌุฑุจ \"The Sociological Imagination\" ูููู ุงูููุฏ ุงูุงุฌุชูุงุนู ๐๏ธ"]],
["ุฃู ูุชุจ ููุฏ ุงุฌุชูุงุนู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Sociological Imagination\" ูููู ุงูููุฏ ุงูุงุฌุชูุงุนู ๐๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุงุฌุชูุงุนู", ["ุฌุฑุจ \"The Sociological Imagination\" ูููู ุงูููุฏ ุงูุงุฌุชูุงุนู ๐๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุงุฌุชูุงุนู", ["ุฌุฑุจ \"The Sociological Imagination\" ูููู ุงูููุฏ ุงูุงุฌุชูุงุนู ๐๏ธ"]],

// 45. ูุชุจ ุนู ุงูููุฏ ุงูุฅุนูุงูู
["ูุชุจ ููุฏ ุฅุนูุงูู", ["ุฌุฑุจ \"Media Control\" ูููู ููุฏ ุงูุฅุนูุงู ๐บ"]],
["ุฃู ูุชุจ ููุฏ ุฅุนูุงูู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Media Control\" ูููู ููุฏ ุงูุฅุนูุงู ๐บ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุฅุนูุงูู", ["ุฌุฑุจ \"Media Control\" ูููู ููุฏ ุงูุฅุนูุงู ๐บ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุฅุนูุงูู", ["ุฌุฑุจ \"Media Control\" ูููู ููุฏ ุงูุฅุนูุงู ๐บ"]],

// 46. ูุชุจ ุนู ุงูููุฏ ุงูุณูููุงุฆู
["ูุชุจ ููุฏ ุณูููุงุฆู", ["ุฌุฑุจ \"Film Art\" ูุชุญููู ุงูุฃููุงู ๐ฅ"]],
["ุฃู ูุชุจ ููุฏ ุณูููุงุฆู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Film Art\" ูุชุญููู ุงูุฃููุงู ๐ฅ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุณูููุงุฆู", ["ุฌุฑุจ \"Film Art\" ูุชุญููู ุงูุฃููุงู ๐ฅ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุณูููุงุฆู", ["ุฌุฑุจ \"Film Art\" ูุชุญููู ุงูุฃููุงู ๐ฅ"]],

// 47.ูุชุจ ุนู ุงูููุฏ ุงููุณุฑุญู

["ูุชุจ ููุฏ ูุณุฑุญู", ["ุฌุฑุจ \"Theatre: Art of the Stage\" ูููู ุงูููุฏ ุงููุณุฑุญู ๐ญ"]],
["ุฃู ูุชุจ ููุฏ ูุณุฑุญู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Theatre: Art of the Stage\" ูููู ุงูููุฏ ุงููุณุฑุญู ๐ญ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ูุณุฑุญู", ["ุฌุฑุจ \"Theatre: Art of the Stage\" ูููู ุงูููุฏ ุงููุณุฑุญู ๐ญ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ูุณุฑุญู", ["ุฌุฑุจ \"Theatre: Art of the Stage\" ูููู ุงูููุฏ ุงููุณุฑุญู ๐ญ"]],

// 48. ูุชุจ ุนู ุงูููุฏ ุงูุฑูุงุถู
["ูุชุจ ููุฏ ุฑูุงุถู", ["ุฌุฑุจ \"Moneyball\" ูููู ุงูููุฏ ุงูุฑูุงุถู ูุงูุชุญููู ุงูุฅุญุตุงุฆู โพ"]],
["ุฃู ูุชุจ ููุฏ ุฑูุงุถู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Moneyball\" ูููู ุงูููุฏ ุงูุฑูุงุถู ูุงูุชุญููู ุงูุฅุญุตุงุฆู โพ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุฑูุงุถู", ["ุฌุฑุจ \"Moneyball\" ูููู ุงูููุฏ ุงูุฑูุงุถู ูุงูุชุญููู ุงูุฅุญุตุงุฆู โพ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุฑูุงุถู", ["ุฌุฑุจ \"Moneyball\" ูููู ุงูููุฏ ุงูุฑูุงุถู ูุงูุชุญููู ุงูุฅุญุตุงุฆู โพ"]],

// 49. ูุชุจ ุนู ุงูููุฏ ุงูููู ุงูุจุตุฑู
["ูุชุจ ููุฏ ุจุตุฑู", ["ุฌุฑุจ \"The Story of Art\" ูููู ุงูููุฏ ุงูููู ุงูุจุตุฑู ๐ผ๏ธ"]],
["ุฃู ูุชุจ ููุฏ ุจุตุฑู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"The Story of Art\" ูููู ุงูููุฏ ุงูููู ุงูุจุตุฑู ๐ผ๏ธ"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ุจุตุฑู", ["ุฌุฑุจ \"The Story of Art\" ูููู ุงูููุฏ ุงูููู ุงูุจุตุฑู ๐ผ๏ธ"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ุจุตุฑู", ["ุฌุฑุจ \"The Story of Art\" ูููู ุงูููุฏ ุงูููู ุงูุจุตุฑู ๐ผ๏ธ"]],

// 50. ูุชุจ ุนู ุงูููุฏ ุงูููุณูุนู
["ูุชุจ ููุฏ ููุณูุนู", ["ุฌุฑุจ \"Encyclopedia of Literary Criticism\" ููุฑุงุฌุนุฉ ุงูููุฏ ุงูุดุงูู ๐"]],
["ุฃู ูุชุจ ููุฏ ููุณูุนู ุฃูุตุญ ุจูุง", ["ุฌุฑุจ \"Encyclopedia of Literary Criticism\" ููุฑุงุฌุนุฉ ุงูููุฏ ุงูุดุงูู ๐"]],
["ุงูุชุฑุญ ูุชุจ ููุฏ ููุณูุนู", ["ุฌุฑุจ \"Encyclopedia of Literary Criticism\" ููุฑุงุฌุนุฉ ุงูููุฏ ุงูุดุงูู ๐"]],
["ูุด ุฃูุถู ูุชุงุจ ููุฏ ููุณูุนู", ["ุฌุฑุจ \"Encyclopedia of Literary Criticism\" ููุฑุงุฌุนุฉ ุงูููุฏ ุงูุดุงูู ๐"]],
]);

function searchKB(query) {
  const normalized = normalize(query);
  let best = null;
  let score = 70;
  for (const [key, answers] of knowledgeBase) {
    const ratio = fuzz.ratio(normalized, normalize(key));
    if (ratio > score) {
      score = ratio;
      best = answers[Math.floor(Math.random() * answers.length)];
    }
  }
  return best;
}

// ====== ุงุณุชุฎุฑุงุฌ ุงููุต ูู ุงููููุงุช ======
async function extractTextFromFile(buffer, mimetype) {
  if (mimetype === 'application/pdf') return (await pdfParse(buffer)).text;
  if (mimetype.includes('word')) return (await mammoth.extractRawText({ buffer })).value;
  if (mimetype === 'text/plain') return buffer.toString('utf8');
  throw new Error('ููุน ุบูุฑ ูุฏุนูู');
}

const upload = multer({
  storage: multer.memoryStorage(),
  limits: { fileSize: 10 * 1024 * 1024 },
  fileFilter: (req, file, cb) => {
    const allowed = [
      'application/pdf',
      'application/msword',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
      'text/plain'
    ];
    cb(null, allowed.includes(file.mimetype));
  }
});

// ====== Gemini ูุน ุงูุณูุงู ======
async function askGeminiWithContext(history, profile = {}) {
  if (!geminiModel) return null;

  const recent = history.slice(-8);
  const context = recent.map(m => `${m.role === 'user' ? 'ุงููุณุชุฎุฏู' : 'ุฃูุช'}: ${m.content}`).join('\n');
  const interests = profile.interests?.length ? `ุงููุณุชุฎุฏู ููุชู ุจู: ${profile.interests.join(', ')}` : '';

  const prompt = `
ุฃูุช "ุจูู ุงููุชุจ"ุ ูุณุงุนุฏ ุฐูู ููุฏูุฏ ูู ุนุงูู ุงููุชุจ ูุงููุฑุงุกุฉ.
${interests}

ุงููุญุงุฏุซุฉ ุงูุณุงุจูุฉ:
${context}

ุงูุณุคุงู ุงูุฌุฏูุฏ: "${recent[recent.length - 1].content}"

ุฃุฌุจ ุจุฃุณููุจ ุฏุงูุฆุ ูุฎุชุตุฑ (3-5 ุฌูู ูุญุฏ ุฃูุตู)ุ ูููุฏ.
- ุฅุฐุง ุทูุจ ูุชุจ โ ุงูุชุฑุญ 2-3 ูุชุจ + ุณุจุจ ูุฎุชุตุฑ.
- ุฅุฐุง ุทูุจ ููุฏ โ ุฃุนุทู ููุงุญุธุงุช ุจูุงุกุฉ.
- ูุง ุชุฐูุฑ ุฃูู AI.
- ุงุณุชุฎุฏู ุฅูููุฌู ุจุณูุท.
`.trim();

  try {
    const result = await geminiModel.generateContent(prompt);
    let text = result.response.text().trim();
    return text.replace(/\*\*/g, '').replace(/\*/g, '');
  } catch (err) {
    console.error("Gemini Error:", err.message);
    return null;
  }
}
function needsClarification(message) {
  if (message.includes("ูุชุจ ุฏูููู") || message === "ุฏูููู") {
    return {
      intent: "books_religious",
      question: "ุชุญุจ ุงููุชุจ ุชููู ุฎูููุฉ ูููุจุชุฏุฆูู ููุง ุนูููุฉ ููุชูุฏูุฉุ ๐"
    };
  }

  if (message.includes("ุฑูุงูุงุช")) {
    return {
      intent: "books_novels",
      question: "ุชุญุจ ุฑูุงูุงุช ูุตูุฑุฉ ููุง ุทูููุฉุ ุฑููุงูุณูุฉ ููุง ุชุดูููุ ๐๐"
    };
  }

  if (message.includes("ุชุทููุฑ ุฐุงุช")) {
    return {
      intent: "books_self",
      question: "ุชุจุบู ุชุญููุฒ ุณุฑูุน ููุง ุชุบููุฑ ุนููู ูู ุงูุญูุงุฉุ ๐ฑ"
    };
  }

  return null;
}

// ====== ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ======
async function processMessage(message, sessionId) {
  const corrected = enhancedAutoCorrect(message);
  const stats = getCorrectionStats(message, corrected);

  // ุชุญุฏูุซ ุงูุฌูุณุฉ
  if (!sessions.has(sessionId)) sessions.set(sessionId, []);
  const history = sessions.get(sessionId);
  history.push({ role: 'user', content: corrected });
  if (history.length > 20) history.shift();

  // ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
  const profile = userProfiles.get(sessionId) || { interests: [] };
  if (corrected.includes("ุชุทููุฑ ุฐุงุช") || corrected.includes("ุชุญููุฒ")) {
    profile.interests = [...new Set([...profile.interests, "ุชุทููุฑ ุฐุงุช"])].slice(-5);
  }
  if (corrected.includes("ุฏูููู") || corrected.includes("ุชูุณูุฑ")) {
    profile.interests = [...new Set([...profile.interests, "ุฏููู"])].slice(-5);
  }
  userProfiles.set(sessionId, profile);

  // ุฃูุงูุฑ ุณุฑูุนุฉ
  if (corrected.startsWith('/ุชุฑุดูุญ ')) {
    const topic = corrected.replace('/ุชุฑุดูุญ ', '').trim();
    return { reply: `ุฌุงุฑู ุงูุจุญุซ ุนู ุฃูุถู ูุชุจ ูู "${topic}"...`, source: 'KB', corrections: stats };
  }
  if (corrected.startsWith('/ููุฏ')) {
    return { reply: "ุฃุฑุณู ุงููุต ุฃู ุงูููู ูุณุฃุนุทูู ููุฏ ุฃุฏุจู ุฏููู", source: 'KB', corrections: stats };
  }
  if (corrected.startsWith('/ูุฌุงูู')) {
    return { reply: "ูู ุงููุชุจ ุงููู ุฃูุชุฑุญูุง ููุฌูุฏุฉ ูุฌุงููุง ุนูู:\nููุชุจุฉ ููุฑ\nุดูุณ ุงููุนุงุฑู\nGoogle Books", source: 'KB', corrections: stats };
  }
  // ====== ุณุคุงู ุชูุถูุญู ูู ุงูุทูุจ ุนุงู ======
const clarification = needsClarification(corrected);
if (clarification) {
  dialogStates.set(sessionId, {
    intent: clarification.intent,
    step: 1,
    data: {}
  });

  return {
    reply: clarification.question,
    source: 'KB',
    corrections: stats
  };
}

// ====== ุฅุฏุงุฑุฉ ุงูุญูุงุฑ ุงูุชูุงุนูู ======
const existingDialog = dialogStates.get(sessionId);

// ูู ูู ุงูุชุธุงุฑ ุฑุฏ
if (existingDialog) {
  dialogStates.delete(sessionId);

  if (existingDialog.intent === "books_religious") {
    if (corrected.includes("ุฎููู")) {
      return {
        reply: "ุชูุงู ๐\nุฃูุตุญู ุจูุชุจ ุฎูููุฉ ูุซู:\n๐ ุงูุฃุฑุจุนูู ุงูููููุฉ\n๐ ูุง ุชุญุฒู\n๐ ุญุตู ุงููุณูู\nุชุญุจ ุฃุฒูุฏู PDFุ",
        source: 'Dialog',
        corrections: stats
      };
    } else {
      return {
        reply: "ููุชุงุฒ ๐ฟ\nุฃูุตุญู ุจูุชุจ ุนูููุฉ ูุซู:\n๐ ุชูุณูุฑ ุงุจู ูุซูุฑ\n๐ ุงูููู ุงูุฅุณูุงูู ูุฃุฏูุชู\n๐ ูู ุธูุงู ุงููุฑุขู\nุชุญุจ ุชูุณูุฑ ููุง ููู ุฃูุซุฑุ",
        source: 'Dialog',
        corrections: stats
      };
    }
  }

  if (existingDialog.intent === "books_novels") {
    if (corrected.includes("ูุตูุฑ")) {
      return {
        reply: "ุชูุงู ๐\nุฑุดุญ ูู:\nโจ ุงูุฃููุฑ ุงูุตุบูุฑ\nโจ ุงูุดูุฎ ูุงูุจุญุฑ\nูุตุต ูุตูุฑุฉ ููุนูุงูุง ุฌููู.",
        source: 'Dialog',
        corrections: stats
      };
    } else {
      return {
        reply: "ุงุฎุชูุงุฑ ุฌููู ๐\nุฑุดุญ ูู:\n๐ฅ ููุจุชุง\n๐ฅ ุงูููู ุงูุฃุฒุฑู\nุฑูุงูุงุช ุชุดุฏู ูู ุฃูู ุตูุญุฉ.",
        source: 'Dialog',
        corrections: stats
      };
    }
  }
}

  // ุงูุจุญุซ ูู KB ุฃููุงู
  const kbReply = searchKB(corrected);
  if (kbReply) {
    const prefix = stats.correctionsCount > 0 ? `ุชู ุชุตุญูุญ ${stats.correctionsCount} ูููุฉ\n\n` : '';
    return { reply: prefix + kbReply, source: 'KB', corrections: stats };
  }

  // Gemini ููุท ุฅุฐุง ูุง ููู ูู KB
  const aiReply = await askGeminiWithContext(history, profile);
  const finalReply = aiReply || "ูุง ูููุช ูุตุฏูุ ูููู ุชูุถุญ ุฃูุซุฑุ";

  const prefix = stats.correctionsCount > 0 ? `ุชู ุชุตุญูุญ ${stats.correctionsCount} ูููุฉ\n\n` : '';
  history.push({ role: 'assistant', content: finalReply });

  return { reply: prefix + finalReply, source: 'KB', corrections: stats };
}

// ====== ุงููุณุงุฑุงุช ======
app.post('/chat', async (req, res) => {
  const { message, sessionId = 'default' } = req.body;
  if (!message?.trim()) return res.status(400).json({ reply: "ุฃุฑุณู ุฑุณุงูุฉ!" });

  console.log(`[ุฑุณุงูุฉ] ${sessionId}: ${message}`);
  const result = await processMessage(message, sessionId);
  res.json(result);
});

app.post('/upload', upload.single('file'), async (req, res) => {
  try {
    if (!req.file) return res.status(400).json({ reply: "ูู ูุชู ุฑูุน ููู" });

    const text = await extractTextFromFile(req.file.buffer, req.file.mimetype);
    const corrected = enhancedAutoCorrect(text);
    const stats = getCorrectionStats(text, corrected);

    let reply = `ุงูููู: ${req.file.originalname}\n`;
    reply += `ุงููููุงุช: ${corrected.split(/\s+/).length} | ุชู ุชุตุญูุญ: ${stats.correctionsCount}\n\n`;

    if (corrected.length <= 2500 && geminiModel) {
      const analysis = await askGeminiSafe(`ูุฏู ููุฏ ุฃุฏุจู ูุฎุชุตุฑ (3-5 ุฌูู) ูููุต ุงูุชุงูู:\n\n${corrected}`);
      reply += analysis ? `ุงูุชูููู:\n${analysis}` : `ุงููุต ุฌูุฏุ ุฑูุฒ ุนูู ุงูููุฑุงุช ูุงูุฃูุซูุฉ.`;
    } else {
      reply += `ุงููุต ุทูููุ ูุณููู ูููุฑุงุช ูุงุถุญุฉ.`;
    }

    res.json({ reply, source: 'ุชุญููู ุงููุต', corrections: stats });
  } catch (err) {
    console.error("ุฎุทุฃ ูู ุงูุฑูุน:", err.message);
    res.status(500).json({ reply: "ุฎุทุฃ ูู ุงููุนุงูุฌุฉ" });
  }
});

async function askGeminiSafe(prompt) {
  if (!geminiModel) return null;
  try {
    const result = await geminiModel.generateContent(prompt);
    return result.response.text().trim().replace(/\*\*/g, '');
  } catch (err) {
    console.error("Gemini Safe Error:", err.message);
    return null;
  }

}

app.get('/', (req, res) => {
  res.sendFile(path.join(__dirname, 'chatbot.html'));
});

app.listen(PORT, () => {
  console.log(`ุงูุดุงุช ุงูุฐูู ูุนูู ุนูู http://localhost:${PORT}`);
  console.log(`ุงูุชุญ ุงููุชุตูุญ ูุฌุฑุจ: "ุงุจุบู ูุชุงุจ ุนู ุงูุตูุงุฉ"`);
});